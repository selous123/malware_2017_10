#coding=utf-8
import argparse
import utils
import os



if __name__=='__main__':
    
    #parse argument 
    parser = argparse.ArgumentParser()
    parser.add_argument(
            '--size',
            type = int,
            default = 512,
            help = 'size of image'
            )
    
    #source_dir .../
    parser.add_argument(
            'source_dir',
            type = str,
            help = 'path of source file'
            )
    
    #destination directory .../img
    parser.add_argument(
            'des_dir',
            type = str,
            default = "",
            help = 'path of store image file'
            )
    FLAGS,unparse = parser.parse_known_args();
    paths = ["train/malware","train/normal","test/malware","test/normal"]
    
    for path in paths:
        for file_path in os.listdir(os.path.join(FLAGS.source_dir,path)):
            des_path = os.path.join(FLAGS.des_dir,path,file_path.split(".")[0]+".jpg")
            sou_path = os.path.join(FLAGS.source_dir,path,file_path)
            utils.transform_to_img(sou_path,des_path,FLAGS.size)